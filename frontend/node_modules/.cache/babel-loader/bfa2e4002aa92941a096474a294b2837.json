{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst ADD_RESERVATION = \"reservation/ADD\";\nconst STORE_RESERVATION = \"reservation/STORE\";\nconst GET_RESERVATION = \"reservation/GET\";\nconst DELETE_RESERVATION = \"reservation/DELETE\"; /////////////////// ACTION CREATORS ////////////////////\n\nconst addBooking = reservation => ({\n  type: ADD_RESERVATION,\n  reservation\n});\n\nconst newReservation = reservation => ({\n  type: STORE_RESERVATION,\n  reservation\n});\n\nconst getBooking = reservation => ({\n  type: GET_RESERVATION,\n  reservation\n});\n\nconst deleteBooking = reservationId => ({\n  type: DELETE_RESERVATION,\n  reservationId\n}); //////////////// THUNK ACTION CREATORS ////////////////////\n\n\nexport const createBooking = reservation => async dispatch => {\n  const response = await csrfFetch(`/api/reservation`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(reservation)\n  });\n\n  if (response.ok) {\n    const reservation = await response.json();\n    dispatch(addBooking(reservation));\n    return reservation;\n  }\n};\nexport const storeNewBooking = reservation => async dispatch => {\n  dispatch(newBooking(reservation));\n  return reservation;\n};\nexport const getBookings = userId => async dispatch => {\n  const response = await csrfFetch(`/api/users/${userId}/reservations`);\n\n  if (response.ok) {\n    const reservation = await response.json();\n    dispatch(getBooking(reservation));\n    return reservation;\n  }\n\n  ;\n};\nexport const cancelBooking = reservationId => async dispatch => {\n  const response = await csrfFetch(`/api/reservations/${reservationId}`, {\n    method: \"DELETE\"\n  });\n\n  if (response.ok) {\n    const reservationId = await response.json();\n    dispatch(deleteBooking(reservationId));\n  }\n\n  ;\n}; /////////////////////// REDUCER //////////////////////////\n\nconst initialState = {};\n\nconst reservationReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_RESERVATION:\n      return action.reservation;\n\n    case STORE_RESERVATION:\n      return action.reservation;\n\n    case GET_RESERVATION:\n      return action.reservation;\n\n    case DELETE_RESERVATION:\n      const newState = { ...state\n      };\n      delete newState[action.bookingId];\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default reservationReducer;","map":{"version":3,"sources":["/home/stephenchoung/aafolder/Week16/App-Academy-Week16-Solo-Project-Base/frontend/src/store/reservations.js"],"names":["csrfFetch","ADD_RESERVATION","STORE_RESERVATION","GET_RESERVATION","DELETE_RESERVATION","addBooking","reservation","type","newReservation","getBooking","deleteBooking","reservationId","createBooking","dispatch","response","method","headers","body","JSON","stringify","ok","json","storeNewBooking","newBooking","getBookings","userId","cancelBooking","initialState","reservationReducer","state","action","newState","bookingId"],"mappings":"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","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst ADD_RESERVATION = \"reservation/ADD\";\nconst STORE_RESERVATION  = \"reservation/STORE\";\nconst GET_RESERVATION  = \"reservation/GET\";\nconst DELETE_RESERVATION  = \"reservation/DELETE\";\n\n/////////////////// ACTION CREATORS ////////////////////\n\nconst addBooking = reservation => ({\n    type: ADD_RESERVATION ,\n    reservation\n});\n\nconst newReservation = reservation => ({\n    type: STORE_RESERVATION ,\n    reservation\n});\n\nconst getBooking = (reservation) => ({\n    type: GET_RESERVATION ,\n    reservation\n});\n\nconst deleteBooking = (reservationId) => ({\n    type: DELETE_RESERVATION ,\n    reservationId\n});\n\n//////////////// THUNK ACTION CREATORS ////////////////////\n\nexport const createBooking = reservation => async (dispatch) => {\n    const response = await csrfFetch(`/api/reservation`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(reservation)\n    });\n\n    if (response.ok) {\n        const reservation = await response.json();\n        dispatch(addBooking(reservation));\n        return reservation;\n    }\n}\n\nexport const storeNewBooking = reservation => async (dispatch) => {\n    dispatch(newBooking(reservation))\n    return reservation;\n}\n\nexport const getBookings = (userId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/users/${userId}/reservations`);\n\n    if (response.ok) {\n        const reservation = await response.json();\n        dispatch(getBooking(reservation));\n        return reservation;\n    };\n}\n\nexport const cancelBooking = (reservationId) => async (dispatch) => {\n    const response = await csrfFetch(`/api/reservations/${reservationId}`, {\n        method: \"DELETE\"\n    });\n\n    if (response.ok) {\n        const reservationId = await response.json();\n        dispatch(deleteBooking(reservationId));\n    };\n}\n\n/////////////////////// REDUCER //////////////////////////\n\nconst initialState = {};\n\nconst reservationReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_RESERVATION :\n            return action.reservation;\n        case STORE_RESERVATION :\n            return action.reservation;\n        case GET_RESERVATION :\n            return action.reservation;\n        case DELETE_RESERVATION :\n            const newState = { ...state }\n            delete newState[action.bookingId]\n            return newState;\n        default:\n            return state;\n    }\n};\n\nexport default reservationReducer;\n"]},"metadata":{},"sourceType":"module"}