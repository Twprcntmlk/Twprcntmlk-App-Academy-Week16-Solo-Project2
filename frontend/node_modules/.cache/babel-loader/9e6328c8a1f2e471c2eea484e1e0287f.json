{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst LOAD = 'listings/LOAD';\nconst FIND_ONE = 'listings/FIND_ONE';\n\nconst load = listings => ({\n  type: LOAD,\n  listings\n});\n\nconst getOne = listing => ({\n  type: FIND_ONE,\n  listing\n}); //Get listings from database//////////////////////////////\n\n\nexport const getlistings = () => async dispatch => {\n  const res = await csrfFetch('/api/listings'); // problem is here?\n\n  if (res.ok) {\n    const listings = await res.json();\n    dispatch(load(listings));\n  }\n}; ////////////////////////////////////////////////\n\nexport const findlistings = id => async dispatch => {\n  const res = await csrfFetch(`/api/listings/${id}`);\n\n  if (res.ok) {\n    const listing = await res.json();\n    dispatch(getOne(listing));\n  }\n};\nexport const editlistings = id => async dispatch => {\n  const res = await csrfFetch(`/api/listings/${id}`);\n\n  if (res.ok) {\n    const listing = await res.json();\n    dispatch(getOne(listing));\n  }\n}; // export const editReservations  = (reservation) => async (dispatch) => {\n//     const response = await csrfFetch(`/api/reservation/${reservation.Id}`, {\n//         method: \"PUT\",\n//         body: JSON.stringify(reservation),\n//     });\n//     if (response.ok) {\n//         const changedReservation = await response.json();\n//         dispatch(editReservation(changedReservation));\n//     };\n// }\n\nconst listingsReducer = (state = {}, action) => {\n  switch (action.type) {\n    case LOAD:\n      {\n        const alllistings = {};\n        action.listings.forEach(listing => {\n          alllistings[listing.id] = listing;\n        });\n        return { ...alllistings\n        };\n      }\n\n    case FIND_ONE:\n      return { ...action.listing\n      };\n\n    default:\n      return state;\n  }\n\n  ;\n};\n\nexport default listingsReducer;","map":{"version":3,"sources":["/home/stephenchoung/aafolder/Week16/App-Academy-Week16-Solo-Project-Base/frontend/src/store/listings.js"],"names":["csrfFetch","LOAD","FIND_ONE","load","listings","type","getOne","listing","getlistings","dispatch","res","ok","json","findlistings","id","editlistings","listingsReducer","state","action","alllistings","forEach"],"mappings":"AAAA,SAASA,SAAT,QAA0B,QAA1B;AAEA,MAAMC,IAAI,GAAG,eAAb;AACA,MAAMC,QAAQ,GAAG,mBAAjB;;AAGA,MAAMC,IAAI,GAAGC,QAAQ,KAAK;AACxBC,EAAAA,IAAI,EAAEJ,IADkB;AAExBG,EAAAA;AAFwB,CAAL,CAArB;;AAKA,MAAME,MAAM,GAAGC,OAAO,KAAK;AACvBF,EAAAA,IAAI,EAAEH,QADiB;AAEvBK,EAAAA;AAFuB,CAAL,CAAtB,C,CAKA;;;AACA,OAAO,MAAMC,WAAW,GAAG,MAAM,MAAMC,QAAN,IAAkB;AACnD,QAAMC,GAAG,GAAG,MAAMV,SAAS,CAAC,eAAD,CAA3B,CADmD,CACL;;AAC9C,MAAIU,GAAG,CAACC,EAAR,EAAY;AACR,UAAMP,QAAQ,GAAG,MAAMM,GAAG,CAACE,IAAJ,EAAvB;AACAH,IAAAA,QAAQ,CAACN,IAAI,CAACC,QAAD,CAAL,CAAR;AACC;AACJ,CANM,C,CAOP;;AAEA,OAAO,MAAMS,YAAY,GAAIC,EAAD,IAAQ,MAAML,QAAN,IAAkB;AACtD,QAAMC,GAAG,GAAG,MAAMV,SAAS,CAAE,iBAAgBc,EAAG,EAArB,CAA3B;;AAEA,MAAIJ,GAAG,CAACC,EAAR,EAAY;AACR,UAAMJ,OAAO,GAAG,MAAMG,GAAG,CAACE,IAAJ,EAAtB;AACAH,IAAAA,QAAQ,CAACH,MAAM,CAACC,OAAD,CAAP,CAAR;AACH;AACA,CAPM;AASP,OAAO,MAAMQ,YAAY,GAAID,EAAD,IAAQ,MAAML,QAAN,IAAkB;AAClD,QAAMC,GAAG,GAAG,MAAMV,SAAS,CAAE,iBAAgBc,EAAG,EAArB,CAA3B;;AAEA,MAAIJ,GAAG,CAACC,EAAR,EAAY;AACR,UAAMJ,OAAO,GAAG,MAAMG,GAAG,CAACE,IAAJ,EAAtB;AACAH,IAAAA,QAAQ,CAACH,MAAM,CAACC,OAAD,CAAP,CAAR;AACH;AACA,CAPE,C,CASH;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AAOJ,MAAMS,eAAe,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AAChD,UAAOA,MAAM,CAACb,IAAd;AACI,SAAKJ,IAAL;AAAU;AACN,cAAMkB,WAAW,GAAG,EAApB;AACAD,QAAAA,MAAM,CAACd,QAAP,CAAgBgB,OAAhB,CAAwBb,OAAO,IAAI;AAC/BY,UAAAA,WAAW,CAACZ,OAAO,CAACO,EAAT,CAAX,GAA0BP,OAA1B;AACH,SAFD;AAGA,eAAO,EAAC,GAAGY;AAAJ,SAAP;AACH;;AAED,SAAKjB,QAAL;AACI,aAAO,EAAC,GAAGgB,MAAM,CAACX;AAAX,OAAP;;AACJ;AACI,aAAOU,KAAP;AAZR;;AAaC;AAEA,CAhBD;;AAkBA,eAAeD,eAAf","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst LOAD = 'listings/LOAD';\nconst FIND_ONE = 'listings/FIND_ONE';\n\n\nconst load = listings => ({\n  type: LOAD,\n  listings\n});\n\nconst getOne = listing => ({\n    type: FIND_ONE,\n    listing\n  });\n\n//Get listings from database//////////////////////////////\nexport const getlistings = () => async dispatch => {\nconst res = await csrfFetch('/api/listings'); // problem is here?\nif (res.ok) {\n    const listings = await res.json();\n    dispatch(load(listings));\n    }\n}\n////////////////////////////////////////////////\n\nexport const findlistings = (id) => async dispatch => {\nconst res = await csrfFetch(`/api/listings/${id}`);\n\nif (res.ok) {\n    const listing = await res.json();\n    dispatch(getOne(listing));\n}\n};\n\nexport const editlistings = (id) => async dispatch => {\n    const res = await csrfFetch(`/api/listings/${id}`);\n\n    if (res.ok) {\n        const listing = await res.json();\n        dispatch(getOne(listing));\n    }\n    };\n\n    // export const editReservations  = (reservation) => async (dispatch) => {\n    //     const response = await csrfFetch(`/api/reservation/${reservation.Id}`, {\n    //         method: \"PUT\",\n    //         body: JSON.stringify(reservation),\n    //     });\n\n    //     if (response.ok) {\n    //         const changedReservation = await response.json();\n    //         dispatch(editReservation(changedReservation));\n    //     };\n    // }\n\n\n\n\n\n\nconst listingsReducer = (state = {}, action) => {\nswitch(action.type) {\n    case LOAD:{\n        const alllistings = {};\n        action.listings.forEach(listing => {\n            alllistings[listing.id] = listing;\n        });\n        return {...alllistings}\n    }\n\n    case FIND_ONE:\n        return {...action.listing}\n    default:\n        return state;\n};\n\n}\n\nexport default listingsReducer;\n"]},"metadata":{},"sourceType":"module"}